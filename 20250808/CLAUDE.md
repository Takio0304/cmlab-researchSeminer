# CLAUDE.md - CMlab研究プロジェクト管理ファイル

## 📋 プロジェクト概要

### 研究テーマ
**HMDによる浮上式高速鉄道シミュレーションシステム**
- Unity + Meta Quest 3を用いたVR騒音シミュレーション
- 幾何音響理論に基づくリアルタイム音響計算
- リニアモーターカー騒音の可聴化・可視化システム

### 研究期間
- **開始**: 2025年4月（第1回報告会）
- **現在**: 2025年8月（第18回報告会完了）
- **主要成果**: Unity音響システム問題の根本解決

## 📁 ディレクトリ構造とファイル配置

### 包括的ファイルサマリー
**保存場所**: `C:\Users\mtats\Desktop\cmlab\cmlab-researchSeminer\20250808\cmlab_complete_file_summary.md`

このファイルには以下の完全な情報が含まれています：
- 全ディレクトリ・ファイルの詳細マッピング
- 各ファイルの内容要約と技術的詳細
- 研究進捗の時系列分析
- 重要な技術的発見の記録

### 主要ディレクトリ構成

```
C:\Users\mtats\desktop\cmlab\
├── cmlab-researchSeminer\
│   └── 20250808\           # LaTeX発表資料・管理ファイル
├── hokoku\                 # 週次報告書（PDF・Markdown）
│   ├── no1.md ~ no18.md   # 変換済みMarkdownファイル
│   └── *.pdf              # 原本PDFファイル  
└── senpai\
    ├── jr\                # JR東海説明資料
    │   ├── jr1.md ~ jr6.md # 変換済みMarkdown
    │   └── *.pdf          # 原本PDFファイル
    └── unity\             # Unity技術文書
        └── ForButton2_technical_documentation.md
```

## 🔧 開発環境・技術スタック

### 主要技術
- **Unity**: 2021.2.19f1 → 2023.1 → 6000（音割れ問題解決）
- **VRデバイス**: Meta Quest 3 (Oculus Quest2)
- **開発キット**: XR Interaction Toolkit
- **音響処理**: AudioMixer, AAudio Driver
- **通信**: UDP通信（音割れ対策）

### 重要な技術的発見
- **Unity 2023 AAudioドライバー**: 長期間の音割れ問題を根本解決
- **幾何音響理論実装**: 距離減衰、大気吸収、回折、ドップラー効果
- **Maekawaチャート**: 防音壁回折計算の実装

### 推奨コマンド
```bash
# LaTeX文書のコンパイル（日本語対応）
platex B4_masuda_20250808.tex
dvipdfmx B4_masuda_20250808.dvi

# TikZフローチャートの単独コンパイル
platex audio_distortion_flowchart.tex
dvipdfmx audio_distortion_flowchart.dvi

# Unityプロジェクトのビルド（音割れ対策後）
# Unity 2023以降のバージョンを使用すること
```

## 📚 完了済みタスク・成果物

### PDF→Markdown変換完了
- ✅ **週次報告書**: 18ファイル（no1.md～no18.md）
- ✅ **JR東海説明資料**: 6ファイル（jr1.md～jr6.md）
- ✅ **Unity技術文書**: ForButton2.cs解説書（Markdown化完了）
- ✅ **包括的サマリー**: 全ファイル内容の統合分析

### 重要な研究成果
- **音割れ問題解決**: Unity2021→2023移行による根本解決
- **16両編成対応**: より実用的なシミュレーション環境
- **対面走行実装**: 複雑な音響環境の再現
- **構造物音実装**: より現実的な騒音シミュレーション
- **シナリオ化**: ユーザビリティ向上

## 🤝 外部連携・協力関係

### JR東海との協力
- **定期報告**: 6回の技術説明会実施
- **進捗共有**: システム開発の各段階での成果報告
- **実用化検討**: 実際の営業運転環境への適用可能性

### 測定データ活用
- **国土技術政策総合研究所**: 2024年9月16日測定データ
- **実測音源**: 構造物音実装での活用
- **検証データ**: シミュレーション精度向上

## 🎯 今後の研究課題・方向性

### 継続課題
- **音割れ問題改善**: UDP通信による外部デバイス連携完成
- **音源指向性検討**: 実測結果との詳細比較
- **MR技術導入**: Mixed Reality技術の可視化活用

### システム改善方針
- **パフォーマンス最適化**: 地形モデル軽量化
- **精度向上**: 実測データとの継続的比較検証
- **ユーザビリティ向上**: より直感的なインターフェース

### 応用可能性
- **土木工学**: 騒音評価・景観設計支援ツール
- **環境アセスメント**: インフラ整備での事前評価
- **教育・研修**: VR技術を活用した体験型学習

## 📖 LaTeX文書編集における重要な学び

### 実装の正確性確保
- **コード検証の重要性**: 文書内容と実際の実装の一致確認が必須
  - 構造物音距離: 3.0m → 1.5m（ForButton2.cs確認により修正）
  - 指向性モデル: 実装されていない機能の記述を削除
- **技術的誠実性**: 「実装されていないものは書かない」原則

### 研究室文化への適応
- **先輩スタイルの重要性**: nakaso、okumaファイルを参考とした統一感
  - 見出し番号: 2.4.1、2.4.2形式の採用
  - 結論スタイル: 「結論」→「おわりに」、箇条書き中心構成
  - 簡潔性: 詳細説明より要点整理を優先

### LaTeX技術的問題と解決法
- **Unicode文字エラー**: `₁₀` → `$\log_{10}$`（U+2081文字の適切な処理）
- **TikZ図表**: `align=center`でLRモードエラー解決
- **日本語LaTeX**: pLaTeXでの適切な数式表記

### 研究プロセスの可視化
- **フローチャートの価値**: 週次報告会で作成した分類図の学術論文への活用
- **体系的アプローチの重要性**: 5つの音割れ対策手法の色分け分類表示
- **視覚的説明力**: 複雑な技術内容の理解促進

## 📝 管理情報

### 最終更新
- **日付**: 2025年8月3日
- **更新者**: 増田樹 (手動コミット・プッシュ)
- **主要変更**: 小見出し構造の大幅簡略化と論理展開の改善
  - 11個の小見出しを3個に統合（3.1, 3.2, 3.3）
  - 論理的な流れを改善：問題発見と原因分析→体系的解決手法の検討→Unity移行による根本解決
  - 重複していた技術詳細を整理し、読みやすさを大幅向上

### LaTeX文書管理
- **メインファイル**: `B4_masuda_20250808.tex`
- **コンパイル方法**: `pdflatex B4_masuda_20250808.tex`
- **重要な依存**: TikZパッケージ（フローチャート用）、Unicode数式処理

### ファイル管理方針
- **命名規則**: `no[番号].md`, `jr[番号].md`
- **変換方針**: PDF原本保持、Markdown並行管理
- **実装確認**: 文書記述前の必須コード検証
- **スタイル統一**: 先輩研究者の慣例への準拠

### Git コミット方針
- **コミット主体**: 増田樹（研究者本人）として作成
- **Claude AI署名削除**: 「🤖 Generated with Claude Code」「Co-Authored-By: Claude」は使用しない
- **自然なコミット文**: 研究者が自分で書いたような簡潔で適切なメッセージ
- **技術的正確性**: 変更内容を正確に反映した説明

---

**Note**: このファイルは研究プロジェクトの全体把握と継続的管理のために作成されています。特にLaTeX文書編集で学んだ教訓は、今後の研究発表や論文作成において重要な指針となります。